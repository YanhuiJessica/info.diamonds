import Callout from 'nextra-theme-docs/callout'

# **Storage Layouts**

## **Solidity Storage (Default)**

Stores data in contracts using a numeric address space. 

- The first state variable is stored at position 0
- The next state variable is stored at position 1
- The next state variable is stored at position 2, etc.

### **Solidity Default Layout**
Facets of a diamond share the same storage address space because they read and write state variables to the same Diamond.
As a result, facets of the same diamond need to declare the same state variables in the same order if they are reading and writing to the same locations.
If this is not done properly, issues such as storage clashes could occur.

> Problem Example:
> - Diamond has two facets
>    - FacetA and FacetB
>    - FacetA declares state variables â€˜uint first;â€™ and â€˜bytes32 second;â€™
>    - FacetB declares state variables â€˜uint first;â€™ and â€˜string name;â€™.
>    - Both facets are storing `uint first` at position 0, both facets read and write that variable without problem.
>    - Both facets are writing and reading different variables at position 1 â€” â€˜bytes32 secondâ€™ and â€˜string nameâ€™.
    

## **Diamond Storage**

- Unlike Solidity storage layout, Diamond storage allows you to choose the address space
- Facets specify different locations to start storing data, preventing different facets with different state variables from clashing storage locations.
- This is what **Diamond Storage** does -
    - **Hash of unique string gets random storage position to store a struct**
        - struct contains all of the state variables
        - â€˜unique stringâ€™ acts as a namespace for particular functionality
    - ***example*:** ***ERC721Facet** implementation*
        - Facet stores a struct called â€˜ERC721Storageâ€™ at position *â€˜keccak256("com.myproject.erc721");â€™.*
        - struct could contain all the state variables related to ERC721
            - ERC721Facet reads/writes and nothing else

<Callout emoji='ðŸ’Ž'>
    External functions with the same function signature canâ€™t be added to the same diamond.
</Callout>

### **Advantages**

- ERC721Facet is reusable.
- ERC721Facet not cluttered with declarations of variables it does not use

## **App Storage**

- **AppStorage enforces a naming/access convention *makes code more readable and prevents name clashes* of state variables.**
   